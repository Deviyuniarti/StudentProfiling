// Data untuk setiap semester
const semesterData = {
  1: [
    {
      no: 1,
      kode: "AA202222",
      nama: "Tata Kelola Teknologi Informasi",
      sks: 4,
      grade: "A",
      nilaiMutu: 4.0,
      bobot: 16.0,
    },
    {
      no: 2,
      kode: "AA202222",
      nama: "Tata Kelola Teknologi Informasi",
      sks: 2,
      grade: "A-",
      nilaiMutu: 3.75,
      bobot: 7.5,
    },
    {
      no: 3,
      kode: "AA202222",
      nama: "Tata Kelola Teknologi Informasi",
      sks: 2,
      grade: "A",
      nilaiMutu: 4.0,
      bobot: 8.0,
    },
    {
      no: 4,
      kode: "AA202222",
      nama: "Tata Kelola Teknologi Informasi",
      sks: 3,
      grade: "B",
      nilaiMutu: 3.0,
      bobot: 9.0,
    },
    {
      no: 5,
      kode: "AA202222",
      nama: "Tata Kelola Teknologi Informasi",
      sks: 2,
      grade: "C",
      nilaiMutu: 2.0,
      bobot: 4.0,
    },
    {
      no: 6,
      kode: "AA202222",
      nama: "Tata Kelola Teknologi Informasi",
      sks: 3,
      grade: "B",
      nilaiMutu: 3.0,
      bobot: 9.0,
    },
    {
      no: 7,
      kode: "AA202222",
      nama: "Tata Kelola Teknologi Informasi",
      sks: 2,
      grade: "A",
      nilaiMutu: 4.0,
      bobot: 8.0,
    },
    {
      no: 8,
      kode: "AA202222",
      nama: "Tata Kelola Teknologi Informasi",
      sks: 2,
      grade: "A",
      nilaiMutu: 4.0,
      bobot: 8.0,
    },

    // Tambahkan lebih banyak data sesuai kebutuhan
  ],
  2: [
    {
      no: 1,
      kode: "MK201",
      nama: "Aljabar Linear",
      sks: 3,
      grade: "B",
      nilaiMutu: 3.0,
      bobot: 9.0,
    },
    {
      no: 2,
      kode: "MK202",
      nama: "Kimia Dasar",
      sks: 2,
      grade: "3",
      nilaiMutu: 3.0,
      bobot: 6.0,
    },
    {
      no: 2,
      kode: "MK202",
      nama: "Kimia Dasar",
      sks: 3,
      grade: "A",
      nilaiMutu: 4.0,
      bobot: 12.0,
    },
    {
      no: 2,
      kode: "MK202",
      nama: "Kimia Dasar",
      sks: 2,
      grade: "A",
      nilaiMutu: 4.0,
      bobot: 8.0,
    },
    {
      no: 2,
      kode: "MK202",
      nama: "Kimia Dasar",
      sks: 3,
      grade: "B+",
      nilaiMutu: 3.5,
      bobot: 10.5,
    },
    {
      no: 2,
      kode: "MK202",
      nama: "Kimia Dasar",
      sks: 2,
      grade: "A",
      nilaiMutu: 4.0,
      bobot: 8.0,
    },
    {
      no: 2,
      kode: "MK202",
      nama: "Kimia Dasar",
      sks: 3,
      grade: "A-",
      nilaiMutu: 3.75,
      bobot: 11.25,
    },
    {
      no: 2,
      kode: "MK202",
      nama: "Kimia Dasar",
      sks: 2,
      grade: "A",
      nilaiMutu: 4.0,
      bobot: 8.0,
    },

    // Tambahkan lebih banyak data untuk semester 2
  ],
  3: [
    {
      no: 1,
      kode: "MK301",
      nama: "Matematika Lanjut",
      sks: 3,
      grade: "A",
      nilaiMutu: 4.0,
      bobot: 12.0,
    },
    {
      no: 1,
      kode: "MK301",
      nama: "Matematika Lanjut",
      sks: 3,
      grade: "A",
      nilaiMutu: 4.0,
      bobot: 12.0,
    },
    {
      no: 1,
      kode: "MK301",
      nama: "Matematika Lanjut",
      sks: 3,
      grade: "A",
      nilaiMutu: 4.0,
      bobot: 12.0,
    },
    {
      no: 1,
      kode: "MK301",
      nama: "Matematika Lanjut",
      sks: 3,
      grade: "A",
      nilaiMutu: 4.0,
      bobot: 12.0,
    },
    {
      no: 1,
      kode: "MK301",
      nama: "Matematika Lanjut",
      sks: 2,
      grade: "A-",
      nilaiMutu: 3.75,
      bobot: 7.5,
    },
    {
      no: 1,
      kode: "MK301",
      nama: "Matematika Lanjut",
      sks: 3,
      grade: "B",
      nilaiMutu: 3.0,
      bobot: 9.0,
    },
    {
      no: 1,
      kode: "MK301",
      nama: "Matematika Lanjut",
      sks: 3,
      grade: "A",
      nilaiMutu: 4.0,
      bobot: 12.0,
    },
    {
      no: 1,
      kode: "MK301",
      nama: "Matematika Lanjut",
      sks: 3,
      grade: "A-",
      nilaiMutu: 3.75,
      bobot: 11.25,
    },
    // Tambahkan lebih banyak data untuk semester 3
  ],
  4: [
    {
      no: 1,
      kode: "MK301",
      nama: "Matematika Lanjut",
      sks: 3,
      grade: "A-",
      nilaiMutu: 3.75,
      bobot: 11.25,
    },
    {
      no: 1,
      kode: "MK301",
      nama: "Matematika Lanjut",
      sks: 3,
      grade: "A",
      nilaiMutu: 4.0,
      bobot: 12.0,
    },
    {
      no: 1,
      kode: "MK301",
      nama: "Matematika Lanjut",
      sks: 3,
      grade: "A",
      nilaiMutu: 4.0,
      bobot: 12.0,
    },
    {
      no: 1,
      kode: "MK301",
      nama: "Matematika Lanjut",
      sks: 2,
      grade: "A",
      nilaiMutu: 4.0,
      bobot: 8.0,
    },
    {
      no: 1,
      kode: "MK301",
      nama: "Matematika Lanjut",
      sks: 2,
      grade: "B+",
      nilaiMutu: 3.5,
      bobot: 7.0,
    },
    {
      no: 1,
      kode: "MK301",
      nama: "Matematika Lanjut",
      sks: 3,
      grade: "A",
      nilaiMutu: 4.0,
      bobot: 12.0,
    },
    {
      no: 1,
      kode: "MK301",
      nama: "Matematika Lanjut",
      sks: 3,
      grade: "A",
      nilaiMutu: 4.0,
      bobot: 12.0,
    },
    {
      no: 1,
      kode: "MK301",
      nama: "Matematika Lanjut",
      sks: 2,
      grade: "A",
      nilaiMutu: 4.0,
      bobot: 8.0,
    },
  ],
  // Tambahkan data untuk semester 4-8 sesuai kebutuhan
};

// Fungsi untuk mengganti semester dan menampilkan data
function changeSemester(semester) {
  // Reset semua semester
  for (let i = 1; i <= 8; i++) {
    document.getElementById(`semester${i}`).style.backgroundColor = "#FFF5E7";
  }

  // Tampilkan data untuk semester yang dipilih
  document.getElementById(`semester${semester}`).style.backgroundColor =
    "#FCB248";
  displayDataForSemester(semester);
  updateTotalAndIP(semester);
}

// Fungsi untuk menampilkan data semester ke dalam tabel
function displayDataForSemester(semester) {
  const data = semesterData[semester];
  const tbody = document.getElementById("semester-data");
  tbody.innerHTML = ""; // Clear existing rows

  if (data && data.length > 0) {
    data.forEach((row) => {
      const tr = document.createElement("tr");

      tr.innerHTML = ` 
          <td>${row.no}</td>
          <td>${row.kode}</td>
          <td>${row.nama}</td>
          <td>${row.sks}</td>
          <td>${row.grade}</td>
          <td>${row.nilaiMutu.toFixed(2)}</td>
          <td>${row.bobot.toFixed(2)}</td>
        `;

      tbody.appendChild(tr);
    });
  }
}

// Fungsi untuk menghitung total SKS, bobot, dan IPS
// Fungsi untuk menghitung total SKS, bobot, dan IPS
// Fungsi untuk menghitung total SKS, bobot, dan IPS
// Fungsi untuk menghitung total SKS, bobot, dan IPS
function updateTotalAndIP(semester) {
  let totalSks = 0;
  let totalBobot = 0;

  // Ambil data sesuai semester
  const data = semesterData[semester];

  // Cek apakah semester memiliki data
  if (data && data.length > 0) {
    data.forEach((row) => {
      totalSks += row.sks;
      totalBobot += row.bobot;
    });
  }

  // Jika tidak ada data (semester kosong), set semua nilai ke 0
  if (totalSks === 0) {
    document.getElementById("total-sks").textContent = "0";
    document.getElementById("total-bobot").textContent = "0.00";
    document.getElementById("ip-semester").textContent = "0.00";
    document.getElementById("ipk-kumulatif").textContent = "0.00";
    return; // Hentikan fungsi jika semester kosong
  }

  // Update total SKS dan total bobot di footer
  document.getElementById("total-sks").textContent = totalSks;
  document.getElementById("total-bobot").textContent = totalBobot.toFixed(2);

  // Hitung Indeks Prestasi Semester (IPS)
  let ipSemester = totalSks > 0 ? totalBobot / totalSks : 0;

  // Update Indeks Prestasi Semester (IPS) di footer
  document.getElementById("ip-semester").textContent = ipSemester.toFixed(2);

  // Menghitung Indeks Prestasi Kumulatif (IPK)
  let totalSksKumulatif = 0;
  let totalBobotKumulatif = 0;

  // Mengakumulasi SKS dan bobot untuk semua semester yang telah memiliki data
  for (let i = 1; i <= semester; i++) {
    const semesterDataForCurrent = semesterData[i];
    if (semesterDataForCurrent && semesterDataForCurrent.length > 0) {
      semesterDataForCurrent.forEach((row) => {
        totalSksKumulatif += row.sks;
        totalBobotKumulatif += row.bobot;
      });
    }
  }

  // Menghitung IPK kumulatif berdasarkan total SKS dan bobot
  let ipKumulatif =
    totalSksKumulatif > 0 ? totalBobotKumulatif / totalSksKumulatif : 0;

  // Update Indeks Prestasi Kumulatif (IPK) di footer
  document.getElementById("ipk-kumulatif").textContent = ipKumulatif.toFixed(2);
}

// Inisialisasi untuk semester pertama
changeSemester(1);
